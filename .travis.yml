addons:
  postgresql: 9.6
env:
  global:
  - CC_TEST_REPORTER_ID=8e6369201882d69ae19e5b21e9c5d5eab3b84e09e23e485de45516d5f219452d
before_script:
- psql -c 'create database instagram_challenge_test;' -U postgres
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
language: ruby
rvm:
- 2.6.0
script:
- bundle exec rails db:migrate RAILS_ENV=test
- bundle exec rake spec
after_script:
- bundle exec rake coveralls:push
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
deploy:
  provider: heroku
  api_key:
    secure: mYItgXbukMbyx+7W/G4C1gq998GaBqbN1GrKCkeSD6PmpxaRdtAVwPfhFvJckSQhdjloDu2Tq7eDrz3RCEDFnr73rwvQ9pPXFfQpD+T6UB36lwqnQ0Ik0tfEJagV3eWdiiQ4yCdtxe0vVkzGIm2Q5ub2d0uPKR+hMIGFk70DTSEZMWYq8sCjKk+LkNiWYq3OjuuwSDsDVgIJETzuF44lNKMtprYjCtBIuUoGls4oeIqU4RqSlhdUActIkOWotiDGeatCmmUxOEDuHswcj3cC5We+m9WWHv/xX+HKFGh5k2saaOG2vCtnCBqYZpCTlVaCvtIjAYf+mTzy21cLdm6DgjEQId2BskfJX3J/iTlzaN5d/RGVGPhBqtHhWqSdhEv7U4VIVyC089JHWjPMKaPajbwKz6qW7fQLcEcAH8hZzxxW3aOVrzyJYG9FR5UqL3r4lOH/8A+CeOWdbDnoHUotCG3n+q62YepTTng3113VErlQ+Gl4J4zEw2w/y568sozOZwSVIeUZsY7L2iTSZQzb2VTEzF1B04GOF1Ec40Oj8/khGhyGJFRp2amBzFnteBVLniF8nY18bD4IfxgsJL3oa0lYCgZPav4HJSMBAetPKkz+/zkNvFOTJiO3uT0Qg76xpgbXUcmYKyq3QW6xtv3pQN8pD1YTJK1yOwS9igYtX7g=
  app: dt-instaclonegram
  on:
    repo: dafuloth/instagram-challenge
